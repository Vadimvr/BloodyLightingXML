<Window x:Class="mouse_lighting.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        mc:Ignorable="d"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:l="clr-namespace:mouse_lighting"
        xmlns:xctk="clr-namespace:Xceed.Wpf.Toolkit;assembly=Xceed.Wpf.Toolkit"
        DataContext="{Binding MainWindowModel, Source={StaticResource Locator}}"
        Title="{Binding Title}"
        Width="800"
        Height="450">
    <DockPanel>
        <Menu DockPanel.Dock="Top"
              IsMainMenu="True">
            <Menu.ItemsPanel>
                <ItemsPanelTemplate>
                    <DockPanel LastChildFill="False" />
                </ItemsPanelTemplate>
            </Menu.ItemsPanel>
            <MenuItem Header="Файл">
                <MenuItem Header="Выход"
                          Command="{StaticResource CloseWindowCommand}" />
            </MenuItem>
        </Menu>
        <StatusBar DockPanel.Dock="Bottom">
            <StatusBarItem DockPanel.Dock="Right">
                <ResizeGrip />
            </StatusBarItem>
            <StatusBarItem Content="{Binding Status}" />
        </StatusBar>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150"></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition></RowDefinition>
                <RowDefinition></RowDefinition>
            </Grid.RowDefinitions>
            <DockPanel Grid.Row="1">
                <Grid Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"></RowDefinition>
                        <RowDefinition Height="30"></RowDefinition>
                    </Grid.RowDefinitions>
                    <DataGrid ItemsSource="{ Binding Path=Names}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              ColumnWidth="*"
                              IsReadOnly="False"
                              CanUserReorderColumns="False"
                              SelectedItem="{Binding Path=SelectedLighting, Mode=OneWayToSource}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Lighting name"
                                                Binding="{Binding Path=Name}" />
                            <!--<DataGridTextColumn Header="File Name"
                                        Binding="{Binding Path=Guid}" />-->

                        </DataGrid.Columns>
                    </DataGrid>

                    <Button Grid.Row="1"
                            Content="Add"
                            Height="30"
                            Command="{Binding AddNewLightingCommand}" />
                </Grid>
            </DockPanel>
            <DockPanel Grid.Row="1"
                       Grid.Column="1">
                <Grid Grid.Row="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"></RowDefinition>
                        <RowDefinition Height="30"></RowDefinition>
                    </Grid.RowDefinitions>
                    <DataGrid Grid.Row="0"
                              ItemsSource="{ Binding Path=Cycles}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              SelectionMode="Single"
                              ColumnWidth="*"
                              SelectedIndex="{Binding IndexLightingCycle}"
                              CanUserReorderColumns="False">
                        <!--SelectedValue="{Binding SelectedValue}"-->
                        <!--SelectedItem="{Binding SelectedCycle, Mode=TwoWay}"-->
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Color Wheel Start">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <xctk:ColorPicker SelectedColor="{Binding ColorWheelStart, UpdateSourceTrigger=PropertyChanged}"
                                                          DisplayColorAndName="True"
                                                          UsingAlphaChannel="False" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Color Wheel End">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <xctk:ColorPicker SelectedColor="{Binding ColorWheelEnd, UpdateSourceTrigger=PropertyChanged}"
                                                          DisplayColorAndName="True"
                                                          UsingAlphaChannel="False" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Color Second Start">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <xctk:ColorPicker SelectedColor="{Binding ColorSecondStart, UpdateSourceTrigger=PropertyChanged}"
                                                          DisplayColorAndName="True"
                                                          UsingAlphaChannel="False" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Color Second Start">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <xctk:ColorPicker SelectedColor="{Binding ColorSecondEnd, UpdateSourceTrigger=PropertyChanged}"
                                                          DisplayColorAndName="True"
                                                          UsingAlphaChannel="False" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn Header="Step"
                                                Binding="{Binding Step}" />
                            <DataGridTextColumn Header="Display time"
                                                Binding="{Binding DisplayTime}" />
                            <DataGridTextColumn Header="Id"
                                                Binding="{Binding Id, Mode=OneWay}" />
                            <DataGridTemplateColumn Header="Move"
                                                    Width="20">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <!--<Path Fill="Black"
                                              Data="M 0 6 L 12 6 L 6 0 Z">
                                            <Path.InputBindings>
                                                <MouseBinding
                                                    CommandParameter="{Binding Id}"
                                                    Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.UpCycleCommand}"
                                                              MouseAction="LeftClick">
                                                </MouseBinding>
                                            </Path.InputBindings>
                                        </Path>-->
                                        <StackPanel>
                                            <Button CommandParameter="{Binding Path=Id}"
                                                    Height="20"
                                                    Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.UpCycleCommand}">
                                                <Path Fill="Black"
                                                      Data="M 0 6 L 12 6 L 6 0 Z" />
                                            </Button>
                                            <Button CommandParameter="{Binding Path=Id}"
                                                    Height="20"
                                                    Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.DownCycleCommand}">
                                                <Path Fill="Black"
                                                      Data="M 0 0 L 6 6 L 12 0 Z" />
                                            </Button>
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTemplateColumn Header="Delete cycle"
                                                    Width="80">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button CommandParameter="{Binding Path=Id}"
                                                Content="Delete"
                                                Command="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.RemoveCycleCommand}" />
                                        <!--IsEnabled="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=DataContext.ButtonImDIsEnable}"-->
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                    <StackPanel Grid.Row="1"
                                Orientation="Horizontal"
                                HorizontalAlignment="Right">
                        <Button Content="Export"
                                Height="30"
                                Width="100"
                                Command="{Binding ExportToXmlLightingFileCommand}" />
                        <Button Content="Add"
                                Height="30"
                                Width="100"
                                Command="{Binding AddNewCycleCommand}" />
                    </StackPanel>
                </Grid>
            </DockPanel>
        </Grid>
    </DockPanel>
</Window>